<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Komunitas Afiliator Cerdas - Program Afiliasi</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            scroll-behavior: smooth;
        }
        .gradient-text {
            background: linear-gradient(to right, #ec4899, #d946ef);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        /* Style untuk modal */
        .modal-overlay {
            transition: opacity 0.3s ease;
        }
        .modal-container {
            transition: transform 0.3s ease;
        }
    </style>
</head>
<body class="bg-amber-50 text-gray-800">

    <!-- Header -->
    <header class="bg-gradient-to-r from-pink-600 to-fuchsia-700 shadow-lg">
        <div class="container mx-auto px-6 py-4 text-center">
            <h1 class="text-4xl font-bold text-white">KOMUNITAS AFILIATOR CERDAS</h1>
            <p class="text-gray-200 mt-2">Dapatkan Komisi Setiap Ada Pembelian Melalui Kode Referal Anda!</p>
        </div>
    </header>

    <!-- Main Content -->
    <main class="container mx-auto px-6 py-12">

        <!-- Tutorial Section -->
        <section id="berita" class="space-y-16">
            <h2 class="text-3xl font-bold text-center mb-12 text-gray-900">Tutorial Paling Banyak Dicari</h2>

            <!-- Tutorial 1 (Gen Z) -->
            <article class="grid md:grid-cols-2 gap-8 items-center bg-white text-gray-800 p-6 rounded-2xl shadow-2xl border border-gray-200">
                <img src="https://placehold.co/600x400/1e293b/ffffff?text=Video+Viral+TikTok" alt="Tutorial Edit Video TikTok" class="rounded-lg w-full h-auto object-cover">
                <div>
                    <h3 class="text-2xl font-bold mb-3 text-gray-900">Trik Edit Video TikTok Agar Cepat Viral</h3>
                    <p class="text-gray-600 mb-6">Untuk Gen Z yang kreatif! Pelajari cara menggunakan transisi, sound effect, dan color grading yang sedang tren untuk membuat konten video Anda ditonton jutaan kali. Semua dibahas hanya dengan menggunakan HP.</p>
                    <div class="bg-amber-100 p-4 rounded-lg">
                        <div class="flex items-center gap-4">
                            <img src="https://placehold.co/100x100/334155/ffffff?text=Video+Templates" alt="Produk Digital 1" class="w-24 h-24 rounded-md object-cover">
                            <div>
                                <h4 class="font-semibold text-lg text-gray-800">Paket Template & Sound Effect Viral</h4>
                                <p class="text-sm text-gray-500 my-1">Ratusan aset siap pakai untuk konten video Anda.</p>
                                <p class="text-xl font-bold text-pink-700">Rp 125.000</p>
                            </div>
                        </div>
                        <button class="beli-produk-btn mt-4 w-full text-white bg-pink-600 hover:bg-pink-700 font-medium rounded-lg text-sm px-5 py-2.5 text-center" data-product-name="Paket Template & Sound Effect Viral">Beli Produk Ini</button>
                    </div>
                </div>
            </article>

            <!-- Tutorial 2 (Ibu-ibu) -->
            <article class="grid md:grid-cols-2 gap-8 items-center bg-white text-gray-800 p-6 rounded-2xl shadow-2xl border border-gray-200">
                <div class="md:order-2">
                    <img src="https://placehold.co/600x400/1e293b/ffffff?text=Resep+Masakan+Rumahan" alt="Tutorial Memasak" class="rounded-lg w-full h-auto object-cover">
                </div>
                <div class="md:order-1">
                    <h3 class="text-2xl font-bold mb-3 text-gray-900">Resep Masakan Rumahan Anti Gagal (Menu Seminggu)</h3>
                    <p class="text-gray-600 mb-6">Spesial untuk para Ibu! Temukan inspirasi menu masakan harian yang lezat, praktis, dan disukai seluruh keluarga. Dari menu sarapan hingga makan malam, semua resep sudah teruji dan anti gagal.</p>
                    <div class="bg-amber-100 p-4 rounded-lg">
                        <div class="flex items-center gap-4">
                            <img src="https://placehold.co/100x100/334155/ffffff?text=Ebook+Resep" alt="Produk Digital 2" class="w-24 h-24 rounded-md object-cover">
                            <div>
                                <h4 class="font-semibold text-lg text-gray-800">Ebook Kumpulan Resep Masakan Digital</h4>
                                <p class="text-sm text-gray-500 my-1">Lebih dari 100 resep andalan untuk keluarga Anda.</p>
                                <p class="text-xl font-bold text-pink-700">Rp 125.000</p>
                            </div>
                        </div>
                        <button class="beli-produk-btn mt-4 w-full text-white bg-pink-600 hover:bg-pink-700 font-medium rounded-lg text-sm px-5 py-2.5 text-center" data-product-name="Ebook Kumpulan Resep Masakan Digital">Beli Produk Ini</button>
                    </div>
                </div>
            </article>
            
            <!-- Tutorial 3 (Bapak-bapak) -->
            <article class="grid md:grid-cols-2 gap-8 items-center bg-white text-gray-800 p-6 rounded-2xl shadow-2xl border border-gray-200">
                <img src="https://placehold.co/600x400/1e293b/ffffff?text=Tutorial+Servis+Motor" alt="Tutorial Servis Motor" class="rounded-lg w-full h-auto object-cover">
                <div>
                    <h3 class="text-2xl font-bold mb-3 text-gray-900">Tutorial Perawatan Motor Matic Sendiri di Rumah</h3>
                    <p class="text-gray-600 mb-6">Untuk para Bapak yang hobi ngoprek! Hemat biaya bengkel dengan belajar servis ringan motor matic Anda sendiri. Tutorial ini mencakup cara ganti oli, membersihkan CVT, dan cek kelistrikan dasar.</p>
                    <div class="bg-amber-100 p-4 rounded-lg">
                        <div class="flex items-center gap-4">
                            <img src="https://placehold.co/100x100/334155/ffffff?text=Video+Panduan" alt="Produk Digital 3" class="w-24 h-24 rounded-md object-cover">
                            <div>
                                <h4 class="font-semibold text-lg text-gray-800">Video Panduan Servis Motor Lengkap</h4>
                                <p class="text-sm text-gray-500 my-1">Video HD langkah demi langkah untuk berbagai jenis motor.</p>
                                <p class="text-xl font-bold text-pink-700">Rp 125.000</p>
                            </div>
                        </div>
                        <button class="beli-produk-btn mt-4 w-full text-white bg-pink-600 hover:bg-pink-700 font-medium rounded-lg text-sm px-5 py-2.5 text-center" data-product-name="Video Panduan Servis Motor Lengkap">Beli Produk Ini</button>
                    </div>
                </div>
            </article>

            <!-- Tutorial 4 (Orang Tua) -->
            <article class="grid md:grid-cols-2 gap-8 items-center bg-white text-gray-800 p-6 rounded-2xl shadow-2xl border border-gray-200">
                 <div class="md:order-2">
                    <img src="https://placehold.co/600x400/1e293b/ffffff?text=Keamanan+WhatsApp" alt="Tutorial Keamanan WhatsApp" class="rounded-lg w-full h-auto object-cover">
                </div>
                <div class="md:order-1">
                    <h3 class="text-2xl font-bold mb-3 text-gray-900">Cara Mengamankan Akun WhatsApp dari Penipuan</h3>
                    <p class="text-gray-600 mb-6">Penting untuk semua orang tua! Lindungi privasi keluarga Anda dari modus penipuan online yang semakin marak. Pelajari cara mengaktifkan verifikasi dua langkah dan mengenali ciri-ciri pesan penipuan.</p>
                    <div class="bg-amber-100 p-4 rounded-lg">
                        <div class="flex items-center gap-4">
                            <img src="https://placehold.co/100x100/334155/ffffff?text=Ebook+Keamanan" alt="Produk Digital 4" class="w-24 h-24 rounded-md object-cover">
                            <div>
                                <h4 class="font-semibold text-lg text-gray-800">Ebook Keamanan Digital Keluarga</h4>
                                <p class="text-sm text-gray-500 my-1">Panduan lengkap melindungi keluarga di dunia maya.</p>
                                <p class="text-xl font-bold text-pink-700">Rp 125.000</p>
                            </div>
                        </div>
                        <button class="beli-produk-btn mt-4 w-full text-white bg-pink-600 hover:bg-pink-700 font-medium rounded-lg text-sm px-5 py-2.5 text-center" data-product-name="Ebook Keamanan Digital Keluarga">Beli Produk Ini</button>
                    </div>
                </div>
            </article>

            <!-- Tutorial 5 (Umum) -->
            <article class="grid md:grid-cols-2 gap-8 items-center bg-white text-gray-800 p-6 rounded-2xl shadow-2xl border border-gray-200">
                <img src="https://placehold.co/600x400/1e293b/ffffff?text=Tutorial+Bisnis+Online" alt="Tutorial Bisnis Online" class="rounded-lg w-full h-auto object-cover">
                <div>
                    <h3 class="text-2xl font-bold mb-3 text-gray-900">Panduan Lengkap Memulai Bisnis Online dari Nol</h3>
                    <p class="text-gray-600 mb-6">Ingin punya penghasilan tambahan? Tutorial ini cocok untuk siapa saja yang ingin memulai bisnis online. Pelajari cara mencari produk, strategi pemasaran di media sosial, dan mengelola toko online Anda.</p>
                    <div class="bg-amber-100 p-4 rounded-lg">
                        <div class="flex items-center gap-4">
                            <img src="https://placehold.co/100x100/334155/ffffff?text=Video+Course" alt="Produk Digital 5" class="w-24 h-24 rounded-md object-cover">
                            <div>
                                <h4 class="font-semibold text-lg text-gray-800">Video Course "Bisnis Online Mastery"</h4>
                                <p class="text-sm text-gray-500 my-1">Dari riset produk hingga mendapatkan penjualan pertama.</p>
                                <p class="text-xl font-bold text-pink-700">Rp 125.000</p>
                            </div>
                        </div>
                        <button class="beli-produk-btn mt-4 w-full text-white bg-pink-600 hover:bg-pink-700 font-medium rounded-lg text-sm px-5 py-2.5 text-center" data-product-name="Video Course 'Bisnis Online Mastery'">Beli Produk Ini</button>
                    </div>
                </div>
            </article>

        </section>

        <!-- Profit Potential Section -->
        <section class="mt-24">
            <div class="text-center max-w-3xl mx-auto">
                <h2 class="text-3xl font-bold text-gray-800 mb-4">Bagaimana Caranya Menghasilkan Uang?</h2>
                <p class="text-lg text-gray-600">
                    Sistem kami sangat sederhana. Anda cukup bergabung dengan membeli salah satu produk digital, lalu Anda akan mendapatkan **Kode Referal** pribadi. Sebarkan kode tersebut, dan setiap kali ada orang yang mendaftar dan membeli produk menggunakan kode Anda, Anda akan mendapatkan komisi!
                </p>
            </div>

            <div class="mt-16">
                <h2 class="text-3xl font-bold text-gray-800 mb-12 text-center">Simulasi Potensi Keuntungan Anda</h2>
                <div class="grid md:grid-cols-3 gap-8 text-center">
                    <!-- Simulasi 1: Pemula -->
                    <div class="bg-white p-8 rounded-2xl shadow-lg border border-gray-200 flex flex-col items-center">
                        <svg class="w-24 h-24 mb-4" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <circle cx="12" cy="12" r="10" fill="#FCE7F3"/>
                            <path d="M8 14C8.697 15.2227 10.2398 16.5 12 16.5C13.7602 16.5 15.303 15.2227 16 14" stroke="#EC4899" stroke-width="2" stroke-linecap="round"/>
                            <circle cx="9" cy="10" r="1.5" fill="#EC4899"/>
                            <circle cx="15" cy="10" r="1.5" fill="#EC4899"/>
                        </svg>
                        <h3 class="text-xl font-bold text-gray-800">Tahap Awal</h3>
                        <p class="text-gray-500 mt-2 mb-4">Anda mengajak <strong class="text-pink-600">5 teman</strong> dekat untuk bergabung.</p>
                        <div class="bg-pink-50 p-4 rounded-lg w-full">
                            <p class="text-lg font-semibold text-gray-700">5 Penjualan x Rp 25.000</p>
                            <p class="gradient-text text-4xl font-extrabold mt-2">Rp 125.000</p>
                        </div>
                    </div>
                    <!-- Simulasi 2: Berkembang -->
                    <div class="bg-white p-8 rounded-2xl shadow-lg border border-gray-200 flex flex-col items-center">
                        <svg class="w-24 h-24 mb-4" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <circle cx="12" cy="12" r="10" fill="#F5D0FE"/>
                            <path d="M8 14C8.697 15.2227 10.2398 16.5 12 16.5C13.7602 16.5 15.303 15.2227 16 14" stroke="#A855F7" stroke-width="2" stroke-linecap="round"/>
                            <circle cx="9" cy="10" r="1.5" fill="#A855F7"/>
                            <circle cx="15" cy="10" r="1.5" fill="#A855F7"/>
                            <path d="M7.5 8C7.5 5.51472 9.51472 3.5 12 3.5C14.4853 3.5 16.5 5.51472 16.5 8H7.5Z" fill="#A855F7"/>
                            <path d="M6 8H18V9.5H6V8Z" fill="#A855F7"/>
                        </svg>
                        <h3 class="text-xl font-bold text-gray-800">Tahap Berkembang</h3>
                        <p class="text-gray-500 mt-2 mb-4">Anda promosi di media sosial dan berhasil mengajak <strong class="text-fuchsia-600">20 orang</strong>.</p>
                         <div class="bg-fuchsia-50 p-4 rounded-lg w-full">
                            <p class="text-lg font-semibold text-gray-700">20 Penjualan x Rp 25.000</p>
                            <p class="gradient-text text-4xl font-extrabold mt-2">Rp 500.000</p>
                        </div>
                    </div>
                    <!-- Simulasi 3: Ahli -->
                    <div class="bg-white p-8 rounded-2xl shadow-lg border border-gray-200 flex flex-col items-center">
                        <svg class="w-24 h-24 mb-4" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <circle cx="12" cy="12" r="10" fill="#FDF2F8"/>
                            <path d="M8 14C8.697 15.2227 10.2398 16.5 12 16.5C13.7602 16.5 15.303 15.2227 16 14" stroke="#E5398D" stroke-width="2" stroke-linecap="round"/>
                            <circle cx="9" cy="10" r="1.5" fill="#E5398D"/>
                            <circle cx="15" cy="10" r="1.5" fill="#E5398D"/>
                            <path d="M12 16.5L11 17.5L12 21L13 17.5L12 16.5Z" fill="#581C87"/>
                            <path d="M11 17.5L13 17.5L12 16.5L11 17.5Z" fill="#A855F7"/>
                        </svg>
                        <h3 class="text-xl font-bold text-gray-800">Tahap Ahli</h3>
                        <p class="text-gray-500 mt-2 mb-4">Anda konsisten dan berhasil mengajak <strong class="text-pink-600">100 orang</strong> dalam sebulan.</p>
                         <div class="bg-pink-50 p-4 rounded-lg w-full">
                            <p class="text-lg font-semibold text-gray-700">100 Penjualan x Rp 25.000</p>
                            <p class="gradient-text text-4xl font-extrabold mt-2">Rp 2.500.000</p>
                        </div>
                    </div>
                </div>
            </div>
             <div class="mt-16 max-w-3xl mx-auto">
                 <div class="bg-white p-8 rounded-2xl shadow-lg border border-gray-200">
                    <h3 class="text-2xl font-bold text-gray-800 text-center mb-4">Dan Ini Baru Permulaan...</h3>
                    <p class="text-lg text-gray-600 text-center">
                        Ingat, komisi <strong>Rp 25.000</strong> tidak hanya didapat sekali. Setiap kali member di bawah Anda (downline) membeli produk digital **apapun** di masa depan, Anda akan **terus menerus** mendapatkan komisi. Inilah potensi penghasilan pasif yang sesungguhnya!
                    </p>
                 </div>
            </div>
        </section>

        <!-- Affiliate CTA Section -->
        <section id="afiliasi" class="mt-24 text-center bg-gradient-to-r from-pink-600 to-fuchsia-700 p-10 rounded-2xl shadow-2xl text-white">
            <h2 class="text-4xl font-extrabold mb-4">Gabung Komunitas & Dapatkan Penghasilan!</h2>
            <p class="text-xl max-w-3xl mx-auto mb-6">
                Setiap orang yang mengisi formulir dan membeli produk digital akan mendapatkan <strong>Kode Referal</strong>. Manfaat kode referal yaitu Anda akan mendapatkan komisi sebesar <strong>Rp 25.000</strong> setiap kali ada downline (member di bawah Anda) yang melakukan pembelian produk digital.
            </p>
            <h3 class="text-2xl font-bold mb-4">Gabung Sekarang!</h3>
            
            <form id="form-afiliasi" class="max-w-xl mx-auto bg-white p-8 rounded-lg text-left shadow-lg border border-gray-200">
                <div class="mb-4">
                    <label for="nama" class="block mb-2 text-sm font-medium text-gray-600">Nama Lengkap</label>
                    <input type="text" id="nama" class="bg-amber-100 border border-amber-200 text-gray-900 text-sm rounded-lg focus:ring-pink-500 focus:border-pink-500 block w-full p-2.5" placeholder="John Doe" required>
                </div>
                <div class="mb-4">
                    <label for="wa" class="block mb-2 text-sm font-medium text-gray-600">Nomor WhatsApp</label>
                    <input type="tel" id="wa" class="bg-amber-100 border border-amber-200 text-gray-900 text-sm rounded-lg focus:ring-pink-500 focus:border-pink-500 block w-full p-2.5" placeholder="Contoh: 081234567890" required>
                </div>
                <div class="mb-4">
                    <label for="alamat" class="block mb-2 text-sm font-medium text-gray-600">Alamat (Kota & Provinsi)</label>
                    <input type="text" id="alamat" class="bg-amber-100 border border-amber-200 text-gray-900 text-sm rounded-lg focus:ring-pink-500 focus:border-pink-500 block w-full p-2.5" placeholder="Jakarta, DKI Jakarta" required>
                </div>
                <div class="mb-6">
                    <label for="uplink" class="block mb-2 text-sm font-medium text-gray-600">Kode Referal (Uplink)</label>
                    <input type="text" id="uplink" class="bg-amber-100 border border-amber-200 text-gray-900 text-sm rounded-lg focus:ring-pink-500 focus:border-pink-500 block w-full p-2.5" placeholder="Kosongkan jika tidak ada">
                </div>
                <button id="submit-button" type="submit" class="text-white bg-pink-600 hover:bg-pink-700 focus:ring-4 focus:outline-none focus:ring-pink-800 font-medium rounded-lg text-lg w-full px-5 py-3 text-center">Gabung & Dapatkan Kode Referal</button>
            </form>
        </section>

        <!-- Network View Section -->
        <section id="jaringan" class="mt-24">
            <h2 class="text-3xl font-bold text-center mb-8 text-gray-900">Lihat Jaringan Anda</h2>
            <div class="max-w-xl mx-auto bg-white p-8 rounded-lg shadow-lg border border-gray-200">
                <div class="flex flex-col sm:flex-row gap-4 mb-4">
                    <input type="text" id="kode-cek" class="bg-amber-100 border border-amber-200 text-gray-900 text-sm rounded-lg focus:ring-pink-500 focus:border-pink-500 block w-full p-2.5" placeholder="Masukkan Kode Referal Anda">
                    <button id="btn-cek-jaringan" class="text-white bg-slate-700 hover:bg-slate-800 font-medium rounded-lg text-sm px-5 py-2.5">Lihat</button>
                </div>
                <div id="hasil-jaringan" class="mt-6 p-4 bg-amber-100 rounded-lg min-h-[100px]">
                    <p class="text-gray-500 text-center">Hasil akan ditampilkan di sini.</p>
                </div>
                
                <!-- Admin Panel -->
                <div id="admin-panel" class="hidden mt-8 pt-6 border-t border-gray-300">
                    
                    <div class="mb-8">
                        <a href="admin_dashboard.html" target="_blank" class="block w-full text-center bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-4 rounded-lg mb-6">
                            Buka Dasbor Manajemen Anggota
                        </a>
                    </div>

                    <!-- Admin Manual Registration Section -->
                    <div class="mb-8 pt-6 border-t border-gray-300">
                        <h4 class="font-bold text-xl mb-4 text-center text-gray-900">Daftarkan Member Manual</h4>
                        <form id="form-admin-manual" class="space-y-4">
                            <div>
                                <label for="nama-manual" class="block mb-2 text-sm font-medium text-gray-600">Nama Lengkap</label>
                                <input type="text" id="nama-manual" class="bg-amber-100 border border-amber-200 text-gray-900 text-sm rounded-lg focus:ring-pink-500 focus:border-pink-500 block w-full p-2.5" required>
                            </div>
                            <div>
                                <label for="wa-manual" class="block mb-2 text-sm font-medium text-gray-600">Nomor WA</label>
                                <input type="text" id="wa-manual" class="bg-amber-100 border border-amber-200 text-gray-900 text-sm rounded-lg focus:ring-pink-500 focus:border-pink-500 block w-full p-2.5" placeholder="Contoh: 081234567890" required>
                            </div>
                             <div>
                                <label for="alamat-manual" class="block mb-2 text-sm font-medium text-gray-600">Alamat</label>
                                <input type="text" id="alamat-manual" class="bg-amber-100 border border-amber-200 text-gray-900 text-sm rounded-lg focus:ring-pink-500 focus:border-pink-500 block w-full p-2.5" required>
                            </div>
                            <div>
                                <label for="kode-manual" class="block mb-2 text-sm font-medium text-gray-600">Kode Referal (Buat Baru)</label>
                                <input type="text" id="kode-manual" class="bg-amber-100 border border-amber-200 text-gray-900 text-sm rounded-lg focus:ring-pink-500 focus:border-pink-500 block w-full p-2.5" required>
                            </div>
                            <div>
                                <label for="uplink-manual" class="block mb-2 text-sm font-medium text-gray-600">Kode Referal (Uplink)</label>
                                <input type="text" id="uplink-manual" class="bg-amber-100 border border-amber-200 text-gray-900 text-sm rounded-lg focus:ring-pink-500 focus:border-pink-500 block w-full p-2.5" required>
                            </div>
                            <button type="submit" class="text-white bg-pink-600 hover:bg-pink-700 font-medium rounded-lg text-sm w-full px-5 py-2.5 text-center">Daftarkan Member</button>
                        </form>
                    </div>

                    <!-- Admin Transaction Confirmation Section -->
                     <div class="mb-8 pt-6 border-t border-gray-300">
                        <h4 class="font-bold text-xl mb-4 text-center text-gray-900">Konfirmasi Transaksi Pembayaran</h4>
                        <form id="form-admin-konfirmasi" class="space-y-4">
                            <div>
                                <label for="kode-pembeli-konfirmasi" class="block mb-2 text-sm font-medium text-gray-600">Kode Referal Pembeli</label>
                                <input type="text" id="kode-pembeli-konfirmasi" class="bg-amber-100 border border-amber-200 text-gray-900 text-sm rounded-lg focus:ring-pink-500 focus:border-pink-500 block w-full p-2.5" required>
                            </div>
                             <div>
                                <label for="produk-konfirmasi" class="block mb-2 text-sm font-medium text-gray-600">Nama Produk</label>
                                <input type="text" id="produk-konfirmasi" class="bg-amber-100 border border-amber-200 text-gray-900 text-sm rounded-lg focus:ring-pink-500 focus:border-pink-500 block w-full p-2.5" required>
                            </div>
                            <button type="submit" class="text-white bg-green-600 hover:bg-green-700 font-medium rounded-lg text-sm w-full px-5 py-2.5 text-center">Konfirmasi Transaksi</button>
                        </form>
                    </div>

                    <!-- Admin Transaction History Section -->
                    <div id="admin-transactions" class="pt-6 border-t border-gray-300">
                        <h4 class="font-bold text-xl mb-4 text-center text-gray-900">Riwayat Transaksi (Terkonfirmasi)</h4>
                        <div id="transaction-list" class="space-y-2 text-sm">
                            <p class="text-gray-500 text-center">Belum ada transaksi.</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

    </main>

    <!-- Footer -->
    <footer class="bg-amber-100 mt-24">
        <div class="container mx-auto px-6 py-4 text-center text-gray-500">
            &copy; 2025 Komunitas Afiliator Cerdas. All Rights Reserved.
        </div>
    </footer>
    
    <!-- Notification Modal -->
    <div id="modal" class="modal-overlay fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center p-4 z-50 hidden opacity-0">
        <div id="modal-container" class="modal-container bg-white rounded-lg shadow-xl p-8 max-w-sm w-full text-center transform scale-95">
            <h3 id="modal-title" class="text-2xl font-bold mb-4 text-gray-900"></h3>
            <p id="modal-body" class="text-gray-600 mb-6"></p>
            <button id="modal-close" class="bg-pink-600 hover:bg-pink-700 text-white font-bold py-2 px-6 rounded-lg">Tutup</button>
        </div>
    </div>

    <!-- Firebase SDK -->
    <script type="module">
        // Import fungsi yang diperlukan dari SDK
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
        import { getFirestore, doc, getDoc, setDoc, updateDoc, collection, addDoc, getDocs, query, where, onSnapshot, serverTimestamp, arrayUnion, deleteDoc, arrayRemove } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";
        import { getAuth, signInAnonymously, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js";
      
        // Konfigurasi Firebase Anda
        const firebaseConfig = {
          apiKey: "AIzaSyCehTIXl13Wk4BDsuRsolqLxv2HYvlrLU0",
          authDomain: "afiliatorkreatif.firebaseapp.com",
          projectId: "afiliatorkreatif",
          storageBucket: "afiliatorkreatif.appspot.com",
          messagingSenderId: "397456582300",
          appId: "1:397456582300:web:5369b2931802bf13dd2f59"
        };
      
        // Inisialisasi Firebase
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);
        const auth = getAuth(app);

        document.addEventListener('DOMContentLoaded', () => {
            // --- STATE MANAGEMENT ---
            let selectedProduct = null;
            let currentUser = null;

            // --- ELEMEN DOM ---
            const formAfiliasi = document.getElementById('form-afiliasi');
            const inputKodeCek = document.getElementById('kode-cek');
            const btnCekJaringan = document.getElementById('btn-cek-jaringan');
            const hasilJaringan = document.getElementById('hasil-jaringan');
            const adminPanel = document.getElementById('admin-panel');
            const formAdminManual = document.getElementById('form-admin-manual');
            const formAdminKonfirmasi = document.getElementById('form-admin-konfirmasi');
            const beliProdukBtns = document.querySelectorAll('.beli-produk-btn');
            const submitButton = document.getElementById('submit-button');
            const transactionListContainer = document.getElementById('transaction-list');
            
            // Modal elements
            const modal = document.getElementById('modal');
            const modalContainer = document.getElementById('modal-container');
            const modalTitle = document.getElementById('modal-title');
            const modalBody = document.getElementById('modal-body');
            const modalClose = document.getElementById('modal-close');

            // --- FUNGSI ---
            function showModal(title, body) {
                modalTitle.textContent = title;
                modalBody.innerHTML = body;
                modal.classList.remove('hidden');
                setTimeout(() => {
                    modal.classList.remove('opacity-0');
                    modalContainer.classList.remove('scale-95');
                }, 10);
            }

            function hideModal() {
                modal.classList.add('opacity-0');
                modalContainer.classList.add('scale-95');
                setTimeout(() => {
                    modal.classList.add('hidden');
                }, 300);
            }

            function resetFormState() {
                formAfiliasi.reset();
                selectedProduct = null;
                submitButton.textContent = 'Gabung & Dapatkan Kode Referal';
                submitButton.classList.remove('bg-fuchsia-600', 'hover:bg-fuchsia-700');
                submitButton.classList.add('bg-pink-600', 'hover:bg-pink-700');
            }
            
            function formatPhoneNumber(number) {
                let digitsOnly = number.replace(/\D/g, '');
                if (digitsOnly.startsWith('08')) {
                    return '62' + digitsOnly.substring(1);
                }
                if (digitsOnly.startsWith('628')) {
                    return digitsOnly;
                }
                return digitsOnly;
            }

            // --- EVENT LISTENERS ---
            modalClose.addEventListener('click', hideModal);

            beliProdukBtns.forEach(btn => {
                btn.addEventListener('click', function() {
                    selectedProduct = this.dataset.productName;
                    submitButton.textContent = 'Pesan Sekarang & Gabung Komunitas';
                    submitButton.classList.remove('bg-pink-600', 'hover:bg-pink-700');
                    submitButton.classList.add('bg-fuchsia-600', 'hover:bg-fuchsia-700');
                    document.getElementById('afiliasi').scrollIntoView();
                });
            });

            // --- LOGIKA FIREBASE ---

            // 1. Autentikasi Pengguna
            onAuthStateChanged(auth, (user) => {
                if (user) {
                    currentUser = user;
                    console.log("User terautentikasi:", user.uid);
                } else {
                    signInAnonymously(auth).catch((error) => {
                        console.error("Gagal login anonim:", error);
                        showModal('Error Login', 'Gagal terhubung. Pastikan "Anonymous" sign-in diaktifkan di Firebase Console Anda.');
                    });
                }
            });


            // 2. Pendaftaran Afiliasi Publik / Pembelian
            formAfiliasi.addEventListener('submit', async (e) => {
                e.preventDefault();
                submitButton.disabled = true;
                submitButton.textContent = "Memproses...";

                const nama = document.getElementById('nama').value.trim();
                let wa = document.getElementById('wa').value.trim();
                const alamat = document.getElementById('alamat').value.trim();
                const uplinkInput = document.getElementById('uplink').value.trim();
                const uplink = uplinkInput || '12345';
                const uplinkForDisplay = uplinkInput || 'admin';

                wa = formatPhoneNumber(wa);

                if (!/^628\d{8,12}$/.test(wa)) {
                    showModal('Error', 'Nomor WhatsApp yang Anda masukkan tidak valid. Mohon periksa kembali.');
                    submitButton.disabled = false;
                    submitButton.textContent = "Gabung & Dapatkan Kode Referal";
                    return;
                }
                
                try {
                    const uplinkDocRef = doc(db, "member", uplink);
                    const uplinkDocSnap = await getDoc(uplinkDocRef);
                    if (!uplinkDocSnap.exists()) {
                        showModal('Error', `Kode Referal (Uplink) '<strong>${uplink}</strong>' tidak ditemukan. Pastikan kode benar atau kosongkan jika tidak ada.`);
                        submitButton.disabled = false;
                        resetFormState();
                        return;
                    }

                    let newKode;
                    let isUnique = false;
                    while(!isUnique) {
                        newKode = Math.floor(100000 + Math.random() * 900000).toString();
                        const memberDocRef = doc(db, "member", newKode);
                        const memberDocSnap = await getDoc(memberDocRef);
                        if (!memberDocSnap.exists()) {
                            isUnique = true;
                        }
                    }

                    await setDoc(doc(db, "member", newKode), {
                        nama: nama,
                        wa: wa,
                        alamat: alamat,
                        uplink: uplink,
                        downlines: [],
                        createdAt: serverTimestamp()
                    });

                    await updateDoc(uplinkDocRef, {
                        downlines: arrayUnion(newKode)
                    });
                    
                    const nomorAdmin = '6281510735932';
                    let pesan;
                    let modalMessage;

                    if (selectedProduct) {
                        pesan = `PESANAN PRODUK & GABUNG KOMUNITAS:\n-------------------------\nProduk: ${selectedProduct}\nNama: ${nama}\nNo. WA: ${wa}\nAlamat: ${alamat}\nUplink: ${uplinkForDisplay}\nKODE REFERAL BARU: ${newKode}\n-------------------------\nMohon segera diproses. Terima kasih.`;
                        modalMessage = `Pesanan Anda untuk <strong>${selectedProduct}</strong> telah kami terima!`;
                    } else {
                         pesan = `GABUNG KOMUNITAS:\n-------------------------\nNama: ${nama}\nNo. WA: ${wa}\nAlamat: ${alamat}\nUplink: ${uplinkForDisplay}\nKODE REFERAL BARU: ${newKode}\n-------------------------\nMohon segera diproses. Terima kasih.`;
                         modalMessage = `Pendaftaran Anda berhasil!`;
                    }

                    const whatsappURL = `https://api.whatsapp.com/send?phone=${nomorAdmin}&text=${encodeURIComponent(pesan)}`;
                    
                    window.open(whatsappURL, '_blank');
                    showModal('Terima Kasih!', `${modalMessage}<br><br>Kode referal baru Anda adalah: <br><strong class="text-2xl my-2 block text-pink-700">${newKode}</strong><br>Data Anda telah dikirim dan menunggu konfirmasi pembayaran dari admin.`);
                    
                } catch (error) {
                    console.error("Error saat mendaftar:", error);
                    showModal('Error', 'Terjadi kesalahan saat mendaftar. Silakan coba lagi.');
                } finally {
                    submitButton.disabled = false;
                    resetFormState();
                }
            });

            // 3. Cek Jaringan & Tampilan Admin
            btnCekJaringan.addEventListener('click', async () => {
                const kode = inputKodeCek.value.trim();
                hasilJaringan.innerHTML = '<p class="text-gray-500 text-center">Memuat data...</p>'; 
                adminPanel.classList.add('hidden');

                if (!kode) {
                    hasilJaringan.innerHTML = '<p class="text-yellow-500 text-center">Silakan masukkan kode referal.</p>';
                    return;
                }

                if (kode === '12345') {
                    // Tampilan Admin
                    try {
                        hasilJaringan.innerHTML = ''; // Kosongkan panel utama
                        adminPanel.classList.remove('hidden');
                        
                        // Ambil semua data transaksi (real-time)
                        onSnapshot(collection(db, "transactions"), (snapshot) => {
                            transactionListContainer.innerHTML = '';
                            if (snapshot.empty) {
                                transactionListContainer.innerHTML = '<p class="text-gray-500 text-center">Belum ada transaksi terkonfirmasi.</p>';
                                return;
                            }
                            let txOutput = '<ul class="space-y-2">';
                            let transactions = [];
                            snapshot.forEach(doc => transactions.push(doc.data()));
                            transactions.sort((a, b) => (b.createdAt?.toMillis() || 0) - (a.createdAt?.toMillis() || 0));
                            transactions.forEach(tx => {
                                 txOutput += `<li class="bg-amber-200 p-3 rounded text-gray-800">
                                    <p><strong>Nama Pembeli:</strong> ${tx.nama}</p>
                                    <p><strong>Kode Referal:</strong> ${tx.kodeReferal}</p>
                                    <p><strong>Produk:</strong> ${tx.produk}</p>
                                    <p><strong>Tanggal:</strong> ${tx.createdAt ? new Date(tx.createdAt.seconds * 1000).toLocaleDateString('id-ID') : 'Menunggu...'}</p>
                                </li>`;
                            });
                            txOutput += '</ul>';
                            transactionListContainer.innerHTML = txOutput;
                        });

                    } catch (error) {
                        console.error("Error mengambil data admin:", error);
                        hasilJaringan.innerHTML = '<p class="text-red-500 text-center">Gagal memuat data admin.</p>';
                    }
                    return;
                }

                // Tampilan Member
                try {
                    const memberDocRef = doc(db, "member", kode);
                    const memberDocSnap = await getDoc(memberDocRef);

                    if (memberDocSnap.exists()) {
                        const member = memberDocSnap.data();
                        let networkOutput = `<h4 class="font-bold text-lg mb-2 text-gray-900">Jaringan Milik: ${member.nama}</h4>`;
                        if (member.downlines && member.downlines.length > 0) {
                            networkOutput += '<p class="mb-2 text-gray-600">Total downline: ' + member.downlines.length + '</p>';
                            networkOutput += '<ul class="space-y-2 text-sm">';
                            for (const downlineCode of member.downlines) {
                                const downlineDoc = await getDoc(doc(db, "member", downlineCode));
                                if (downlineDoc.exists()) {
                                    const downline = downlineDoc.data();
                                    networkOutput += `<li class="bg-amber-200 p-2 rounded text-gray-800"><strong>${downline.nama}</strong> (Kode: ${downlineCode}) - WA: ${downline.wa}</li>`;
                                }
                            }
                            networkOutput += '</ul>';
                        } else {
                            networkOutput += '<p class="text-gray-500 text-center">Anda belum memiliki downline.</p>';
                        }

                        let transactionOutput = `<h4 class="font-bold text-lg mt-6 pt-4 border-t border-gray-300 mb-2 text-gray-900">Riwayat Penjualan Anda (Terkonfirmasi)</h4>`;
                        const q = query(collection(db, "transactions"), where("uplink", "==", kode));
                        onSnapshot(q, (snapshot) => {
                            let memberTransactionHtml = '';
                            if (snapshot.empty) {
                                 memberTransactionHtml = '<p class="text-gray-500 text-center">Anda belum memiliki riwayat penjualan.</p>';
                            } else {
                                memberTransactionHtml += '<ul class="space-y-2 text-sm">';
                                let transactions = [];
                                snapshot.forEach(doc => transactions.push(doc.data()));
                                transactions.sort((a, b) => (b.createdAt?.toMillis() || 0) - (a.createdAt?.toMillis() || 0));
                                transactions.forEach(tx => {
                                    memberTransactionHtml += `<li class="bg-amber-200 p-3 rounded text-gray-800">
                                        <p><strong>Nama Pembeli:</strong> ${tx.nama}</p>
                                        <p><strong>Kode Referal Baru:</strong> ${tx.kodeReferal}</p>
                                        <p><strong>Tanggal:</strong> ${tx.createdAt ? new Date(tx.createdAt.seconds * 1000).toLocaleDateString('id-ID') : 'Menunggu...'}</p>
                                    </li>`;
                                });
                                memberTransactionHtml += '</ul>';
                            }
                             hasilJaringan.innerHTML = networkOutput + transactionOutput + memberTransactionHtml;
                        });
                         hasilJaringan.innerHTML = networkOutput + transactionOutput + '<p class="text-gray-500 text-center">Memuat riwayat penjualan...</p>';

                    } else {
                        hasilJaringan.innerHTML = '<p class="text-red-500 text-center">Kode referal tidak ditemukan.</p>';
                    }
                } catch (error) {
                    console.error("Error mengambil data member:", error);
                    hasilJaringan.innerHTML = '<p class="text-red-500 text-center">Gagal memuat data member.</p>';
                }
            });

            // 4. Pendaftaran Manual oleh Admin
            formAdminManual.addEventListener('submit', async (e) => {
                e.preventDefault();
                
                const nama = document.getElementById('nama-manual').value.trim();
                let wa = document.getElementById('wa-manual').value.trim();
                const alamat = document.getElementById('alamat-manual').value.trim();
                const kodeBaru = document.getElementById('kode-manual').value.trim();
                const uplink = document.getElementById('uplink-manual').value.trim();

                if (!nama || !wa || !alamat || !kodeBaru || !uplink) {
                    showModal('Error', 'Semua kolom wajib diisi.');
                    return;
                }
                
                wa = formatPhoneNumber(wa);

                if (!/^628\d{8,12}$/.test(wa)) {
                    showModal('Error', 'Nomor WhatsApp yang Anda masukkan tidak valid.');
                    return;
                }
                
                try {
                    const newMemberRef = doc(db, "member", kodeBaru);
                    const newMemberSnap = await getDoc(newMemberRef);
                    if (newMemberSnap.exists()) {
                         showModal('Error', `Kode Referal '<strong>${kodeBaru}</strong>' sudah ada yang menggunakan.`);
                         return;
                    }

                    const uplinkRef = doc(db, "member", uplink);
                    const uplinkSnap = await getDoc(uplinkRef);
                    if (!uplinkSnap.exists()) {
                        showModal('Error', `Kode Referal (Uplink) '<strong>${uplink}</strong>' tidak ditemukan dalam jaringan.`);
                        return;
                    }

                    await setDoc(newMemberRef, {
                        nama: nama,
                        wa: wa,
                        alamat: alamat,
                        uplink: uplink,
                        downlines: [],
                        createdAt: serverTimestamp()
                    });

                    await updateDoc(uplinkRef, {
                        downlines: arrayUnion(kodeBaru)
                    });

                    showModal('Sukses', `Member <strong>${nama}</strong> dengan kode <strong>${kodeBaru}</strong> berhasil didaftarkan. Silakan konfirmasi transaksinya di bawah.`);
                    formAdminManual.reset();
                    
                } catch(error) {
                    console.error("Error mendaftarkan manual:", error);
                    showModal('Error', 'Gagal mendaftarkan member.');
                }
            });

            // 5. Konfirmasi Transaksi oleh Admin
            formAdminKonfirmasi.addEventListener('submit', async (e) => {
                e.preventDefault();

                const kodePembeli = document.getElementById('kode-pembeli-konfirmasi').value.trim();
                const produk = document.getElementById('produk-konfirmasi').value.trim();

                if (!kodePembeli || !produk) {
                    showModal('Error', 'Kode Referal Pembeli dan Nama Produk wajib diisi.');
                    return;
                }

                try {
                    const pembeliRef = doc(db, "member", kodePembeli);
                    const pembeliSnap = await getDoc(pembeliRef);

                    if (!pembeliSnap.exists()) {
                        showModal('Error', `Kode Referal '<strong>${kodePembeli}</strong>' tidak ditemukan dalam jaringan.`);
                        return;
                    }

                    const pembeli = pembeliSnap.data();
                    
                    await addDoc(collection(db, "transactions"), {
                        nama: pembeli.nama,
                        kodeReferal: kodePembeli,
                        produk: produk,
                        createdAt: serverTimestamp(),
                        uplink: pembeli.uplink
                    });

                    showModal('Sukses', `Transaksi untuk <strong>${pembeli.nama}</strong> (Kode: ${kodePembeli}) berhasil dikonfirmasi.`);
                    formAdminKonfirmasi.reset();

                } catch (error) {
                    console.error("Error konfirmasi transaksi:", error);
                    showModal('Error', 'Gagal mengonfirmasi transaksi.');
                }
            });
            
        });
    </script>
</body>
</html>
